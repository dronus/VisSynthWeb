<!DOCTYPE  html>
<html>
<head>
	<title>WebCamVidja Demo</title>
	<script type="text/javascript" src="../src/glfx.js"></script>
	<script src="../src/video.js"></script>
</head>
<body>
	<style>
		html,body,canvas{
			width: 100%;
			height: 100%;
			padding: 0px;
			margin: 0px;
			overflow: hidden;
			background-color: #000;
		}
	</style>
	<script>
		
		var b,c;
		
		var w=640, h=480;
		
		c = wcvj.webcam('c', {canvas: true, glfx: true});
		// c.setFilter[['ink',[0.4]]]);
		var t=0;

		var perspective=[0,0,0,h,w,0,w,h];

		c.canvas.addEventListener('click',function(e){
			var x=e.offsetX/c.canvas.offsetWidth*w, y=e.offsetY/c.canvas.offsetHeight*h;
			var i=0;
			if(x>w/2) i+=2;
			if(y>h/2) i+=1;
			perspective[i*2]=x;
			perspective[i*2+1]=y;			
		});

		s=.5;

		var animation=function(){
			t+=.001;
			var power=Math.sin(t)*.5;
			c.setFilter([['swirl',[300, 246.5, 250, power]],['vibrance',[1.]],['matrixWarp',[[s,0,0,s],false,true]],['perspective',[[0,0,0,h,w,0,w,h],perspective]]]);
			// ,['unsharpMask',[2,10]]
			requestAnimationFrame(animation);
		};
		animation();
		document.body.appendChild(c.canvas);		
// ['hexagonalPixelate',[0,0,6]],
	</script>
</body>
</html>
